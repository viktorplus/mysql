-- 1. Получение текущей даты и времени
SELECT CURRENT_DATE; -- возвращает текущую дату
SELECT CURRENT_TIME; -- возвращает текущее время
SELECT NOW(); -- возвращает текущую дату и время
SELECT CURRENT_TIMESTAMP; -- возвращает текущую дату и время (Поддерживается всеми СУБД)

-- 2. Извлечение частей даты и времени
SELECT YEAR(NOW()), MONTH(NOW()), DAY(NOW()), HOUR(NOW()), MINUTE(NOW()), SECOND(NOW()); -- извлекают определенную часть даты/времени
-- Возвращает номер дня недели для заданной даты, где 0 — понедельник, 1 — вторник и так далее (до воскресенья, который имеет значение 6)
SELECT WEEKDAY(NOW());
-- Возвращает номер дня недели для заданной даты, где 1 — воскресенье, 2 — понедельник и так далее (до субботы, который имеет значение 7)
SELECT DAYOFWEEK(NOW());
-- Возвращает день года для заданной даты (от 1 до 366)
SELECT DAYOFYEAR(NOW());
-- Возвращает год и номер недели для заданной даты, с использованием формата YYYYWW
SELECT YEARWEEK(NOW());
-- Возвращает номер недели в году для заданной даты. Номер недели зависит от начала недели (по умолчанию неделя начинается с воскресенья)
SELECT WEEK(NOW());
-- Возвращает последнюю дату месяца для заданной даты
SELECT LAST_DAY(NOW());
-- Возвращает полное название месяца, дня для заданной даты
SELECT MONTHNAME(NOW()), DAYNAME(NOW());
-- Возвращает квартал для заданной даты (1 — первый квартал, 2 — второй квартал и так далее)
SELECT QUARTER(NOW());

-- EXTRACT(part FROM datetime)
SELECT EXTRACT(YEAR FROM NOW()); -- извлекают определенную часть даты/времени

-- 3. Форматирование
-- STR_TO_DATE(string, format) – форматирует строку в дату и время
SELECT STR_TO_DATE('20-11-2024', '%d-%m-%Y');
SELECT STR_TO_DATE('20-11-2024 15:30:00', '%d-%m-%Y %H:%i:%s');

-- DATE_FORMAT(datetime, format) – форматирует дату и время в строку
SELECT DATE_FORMAT(NOW(), '%d-%m-%Y %H:%i:%s');
SELECT DATE_FORMAT(NOW(), '%W, %d %M %Y %r') AS formatted_date;

-- 4. Сложение и вычитание времени
-- DATE_ADD(), DATE_SUB() – добавляют или вычитают временные интервалы
SELECT DATE_ADD(NOW(), INTERVAL 7 DAY);
SELECT DATE_ADD(NOW(), INTERVAL 1 HOUR);
SELECT ADDDATE(NOW(), INTERVAL 7 DAY); -- старее
SELECT DATE_SUB(NOW(), INTERVAL 1 MONTH);
SELECT SUBDATE("2011-01-01", INTERVAL 5 MONTH); -- старее
SELECT DATE_ADD(DATE_ADD(NOW(), INTERVAL 7 DAY), INTERVAL 2 MONTH);
SELECT NOW() + INTERVAL 1 DAY;
SELECT NOW() + INTERVAL 1 DAY + INTERVAL 1 MONTH;

-- 5. Разница между датами
-- DATEDIFF(date1, date2) – разница в днях между двумя датами
SELECT DATEDIFF('2024-12-01', '2024-11-20');
SELECT DATEDIFF('2024-11-19', '2024-11-20');
SELECT DATEDIFF('2024-12-01 10:00:00', '2024-11-20 11:00:00'); -- не учитывает время

-- TIMESTAMPDIFF(unit, datetime1, datetime2) – разница в заданных единицах
SELECT TIMESTAMPDIFF(DAY, '2024-11-10 10:00:00', NOW());
SELECT TIMESTAMPDIFF(HOUR, '2024-11-22 10:00:00', NOW());
SELECT TIMESTAMPDIFF(DAY, '2024-11-20 11:00:00', '2024-12-01 10:00:00'); -- учитывает время

-- 6. Операции с временными зонами
-- Получить текущий часовой пояс сервера
SELECT @@global.time_zone;

-- CONVERT_TZ(datetime, from_tz, to_tz) – конвертирует дату/время между часовыми поясами
SELECT CONVERT_TZ(NOW(), '+00:00', '+04:00');
SELECT CONVERT_TZ(NOW(), 'UTC', '+04:00');
SELECT CONVERT_TZ(NOW(), 'UTC', 'Europe/Berlin');
SELECT CONVERT_TZ(NOW(), 'Europe/Berlin', '+04:00');



-- Полная таблица сокращений для форматирования дат и времени:
/*
Форматы для функции DATE_FORMAT в MySQL:

Дата:
  %a   : Аббревиатура дня недели (Пример: Wed)
  %b   : Аббревиатура названия месяца (Пример: Nov)
  %c   : Месяц без ведущего нуля (1–12) (Пример: 11)
  %d   : День месяца с ведущим нулем (01–31) (Пример: 20)
  %e   : День месяца без ведущего нуля (1–31) (Пример: 20)
  %j   : День года (001–366) (Пример: 325)
  %M   : Полное название месяца (Пример: November)
  %m   : Месяц с ведущим нулем (01–12) (Пример: 11)
  %W   : Полное название дня недели (Пример: Wednesday)
  %w   : День недели (0=Воскресенье, 6=Суббота) (Пример: 3)
  %Y   : Полный год (Пример: 2024)
  %y   : Год из двух цифр (Пример: 24)

Время:
  %H   : Часы в 24-часовом формате (00–23) (Пример: 14)
  %h   : Часы в 12-часовом формате (01–12) (Пример: 02)
  %I   : Часы в 12-часовом формате (01–12) (Пример: 02)
  %i   : Минуты (00–59) (Пример: 45)
  %p   : AM или PM (Пример: PM)
  %r   : Время в 12-часовом формате (hh:mm:ss AM/PM) (Пример: 02:45:30 PM)
  %S   : Секунды (00–59) (Пример: 30)
  %s   : Секунды (00–59) (Пример: 30)
  %T   : Время в 24-часовом формате (hh:mm:ss) (Пример: 14:45:30)

Прочее:
  %f   : Микросекунды (Пример: 000000)
  %U   : Номер недели в году (воскресенье - первый день недели, 00–53) (Пример: 46)
  %u   : Номер недели в году (понедельник - первый день недели, 00–53) (Пример: 46)
  %V   : Номер недели в году (ISO, понедельник - первый день недели, 01–53) (Пример: 46)
  %v   : Номер недели в году (ISO) (Пример: 46)
  %X   : Год для ISO-недели (Пример: 2024)
  %x   : Год для ISO-недели (Пример: 2024)
  %%   : Символ % (Пример: %)
*/

/*Тип данных: Дата	DATE (YYYY-MM-DD)
Тип данных: Время	TIME (HH:MM)
Текущая дата и время	NOW(), CURRENT_TIMESTAMP()
Текущая дата	CURDATE()
Текущее время	CURTIME()
Разница между датами (в днях)	DATEDIFF(date1, date2)
Добавление интервала к дате	DATE_ADD(date, INTERVAL value unit)
Вычитание интервала из даты	DATE_SUB(date, INTERVAL value unit)
Извлечение части даты	YEAR(date), MONTH(date), DAY(date)
Извлечение года из даты	YEAR(date)
Преобразование времени в секунды	TIME_TO_SEC(time)
Преобразование секунд во время	SEC_TO_TIME(seconds)
*/